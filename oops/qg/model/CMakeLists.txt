list( APPEND oops_qg_src_files
GomQG.cc
GomQG.h
instantiateTlmFactory.h
LinearObsOp.h
LocQG.h
LocalizationMatrixQG.cc
LocalizationMatrixQG.h
ModelBias.h
ModelBiasCovariance.h
ModelBiasIncrement.h
ObsBias.cc
ObsBias.h
ObsBiasCovariance.cc
ObsBiasCovariance.h
ObsBiasIncrement.cc
ObsBiasIncrement.h
ObsHelpQG.cc
ObsHelpQG.h
ObsSpaceQG.cc
ObsSpaceQG.h
ObsStreamQG.cc
ObsStreamQG.h
ObsStreamTLAD.cc
ObsStreamTLAD.h
ObsVecQG.cc
ObsVecQG.h
ObsWSpeedQG.cc
ObsWSpeedQG.h
ObsWSpeedTLAD.cc
ObsWSpeedTLAD.h
ObsWindQG.cc
ObsWindQG.h
ObsWindTLAD.cc
ObsWindTLAD.h
QgErrorCovariance.cc
QgErrorCovariance.h
QgFields.cc
QgFields.h
QgFortran.h
QgGeometry.cc
QgGeometry.h
QgIncrement.cc
QgIncrement.h
QgModel.cc
QgModel.h
QgObservation.cc
QgObservation.h
QgState.cc
QgState.h
QgIdTLM.cc
QgIdTLM.h
QgTLM.cc
QgTLM.h
QgTraits.h
VarQG.cc
VarQG.h
advect_pv.f90
advect_pv_ad.f90
advect_pv_tl.f90
c_qg_b_delete.f90
c_qg_b_inv_mult.f90
c_qg_b_mult.f90
c_qg_b_randomize.f90
c_qg_b_setup.f90
c_qg_delete.F90
c_qg_obs_data.F90
c_qg_prepare_integration.f90
c_qg_prepare_integration_ad.f90
c_qg_prepare_integration_tl.f90
c_qg_prop_traj.f90
c_qg_propagate.f90
c_qg_propagate_ad.f90
c_qg_propagate_tl.f90
c_qg_setup.f90
c_qg_wipe_traj.F90
calc_pv.f90
calc_pv_ad.f90
calc_pv_tl.f90
fft99f.f90
generate_locations.f90
invent_state.f90
invert_pv.f90
invert_pv_ad.f90
invert_pv_tl.f90
laplacian_2d.f90
meridional_wind.f90
meridional_wind_ad.f90
meridional_wind_tl.f90
propagate.f90
pv_operator.f90
pv_operator_ad.f90
qg_3d_covar_configs.F90
qg_3d_covar_delete.F90
qg_3d_covar_setup.f90
qg_3d_covar_sqrt_inv_mult.f90
qg_3d_covar_sqrt_inv_mult_ad.f90
qg_3d_covar_sqrt_mult.f90
qg_3d_covar_sqrt_mult_ad.f90
qg_configs.F90
qg_constants.f90
qg_fields.F90
qg_fields_interface.F90
qg_geom_mod.F90
qg_goms_mod.F90
qg_localization_matrix.f90
qg_locs_mod.F90
qg_obs_data.F90
qg_obs_vectors.F90
qg_obsoper_mod.F90
qg_stream_mod.F90
qg_trajectories.F90
qg_vars_mod.F90
qg_wind_mod.F90
qg_wspeed_mod.F90
solve_elliptic_system.f90
solve_helmholz.f90
zonal_wind.f90
zonal_wind_ad.f90
zonal_wind_tl.f90
)

if ( CMAKE_Fortran_COMPILER_ID MATCHES "Cray" )
  set( cfdealloc C_F_NO_DEALLOC )
endif()

ecbuild_add_library( TARGET   qg
                     DEFINITIONS ${cfdealloc}
                     SOURCES  ${oops_qg_src_files}
                     LIBS     oops ${LAPACK_LIBRARIES}
                     INSTALL_HEADERS LISTED
                     LINKER_LANGUAGE ${OOPS_LINKER_LANGUAGE}
                    )

